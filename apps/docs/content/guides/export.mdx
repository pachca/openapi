---
title: Экспорт сообщений
description: Экспорт данных пространства
---

# Экспорт сообщений

#corporation_price_only #owner_access_token_required

Экспорт сообщений — это архив c файлами в формате `JSON`, где собраны все сообщения из всех чатов, которые были созданы в вашем пространстве.

В экспорте вам будут доступны все сообщения из открытых, закрытых и архивных чатов, в том числе треды. У каждого сообщения будет указан автор, время отправки, текст, список реакций на это сообщение.

Так же, в экспорте есть личные переписки, но в ограниченном формате. В них указан автор сообщения, время отправки, но нет контента сообщений и тредов. Эти данные полезны для оценки вовлеченность сотрудников их активности или оценке нагрузки на каждого из членов команды.

На основе выгрузки можно замерять количество сообщений и реакций в общих чатах. Так можно рассчитать Engagment Rate и улучшать корп. культуру/коммуникацию среди сотрудников. Ещё можно подсчитывать количество активных чатов и смотреть, насколько много в компании ведется обсуждений.

## Как это работает

<Steps>
  <Step title="Запросите экспорт">
    При запросе экспорта можно настроить период, за который вы хотите получить данные, но не более 45 дней. И можете добавить ID-чатов, из которых вы хотите получить экспорт. Если вам нужны данные за период дольше 45 дней, то по завершении одной выгрузки, можно запросить следующую с новым диапазоном дат.

    При запросе экспорта важно учитывать следующие ограничения:

    - выгружаются все чаты, в том числе архивные и личные без контента сообщений
    - не выгружаются треды в личных сообщениях
    - не учитываются вложения
    - не отражаются пересланные сообщения
    - максимальный период одной выгрузки: 45 дней (при запросе с указанием конкретных чатов - 366 дней)
    - максимальный количество запрашиваемых чатов (при указании): 50
    - новый запрос на экспорта вы сможете сделать после завершения текущего

    Для запроса экспорта используйте метод [Экспорт сообщений](POST /chats/exports).

    Экспорт выполняется асинхронно. На указанный `webhook_url` будет отправлен `JSON` с информацией о готовом экспорте.

    <CodeBlock language="json" title="Пример JSON вебхука об успешном завершении экспорта">
    {`{
    "type": "export",
    "event": "ready",
    "export_id": 22322,
    "created_at": "2025-03-20T12:33:58Z"
}`}
    </CodeBlock>
  </Step>

  <Step title="Скачайте готовый архив">
    Получив `JSON` с информацией о готовом экспорте, вам необходимо взять значение поля `export_id` и выполнить запрос на скачивание архива сообщений, указав его в `URL` запроса.

    Для скачивания архива используйте метод [Скачать архив экспорта](GET /chats/exports/{id}).
  </Step>

  <Step title="Изучите структуру архива">
    Архив представляет собой папки, где каждая папка соответствует чату в вашем пространстве. Название папки состоит из имени чата и его `ID`, например: `Design_12925828`. Внутри папки будут `JSON`-файлы, которые соответствуют дате переписки. Каждый день — отдельный файл.

    Дополнительно, рядом с папками будет находиться список чатов, которые попали в экспорт. Список чатов представлен файлом `chats.json`. Список не создается, если при запросе экспорта было указано `skip_chats_file` как `true`.

    <Tree>
      <TreeFolder name="Design_12925828" defaultOpen>
        <TreeFile name="2025-01-15.json" />
        <TreeFile name="2025-01-16.json" />
        <TreeFile name="2025-01-17.json" />
      </TreeFolder>
      <TreeFolder name="Marketing_12925901" defaultOpen>
        <TreeFile name="2025-01-15.json" />
        <TreeFile name="2025-01-16.json" />
      </TreeFolder>
      <TreeFolder name="Development_12926012">
        <TreeFile name="2025-01-15.json" />
        <TreeFile name="2025-01-16.json" />
        <TreeFile name="2025-01-17.json" />
      </TreeFolder>
      <TreeFile name="chats.json" />
    </Tree>

    <SchemaBlock name="ExportMessage" title="Структура данных в JSON-файлах сообщений" />

    Список в файле `chats.json` представляет собой массив объектов чатов. Структура каждого объекта чата описана ниже.

    <SchemaBlock name="ExportChat" title="Структура объекта чата в массиве файла chats.json" />
  </Step>
</Steps>
