---
title: Запросы и ответы
description: Формат запросов, авторизация, пагинация
---

# Запросы и ответы

## Доступ

Для работы с методами API вам необходимо иметь действующий `access_token`.

`access_token` не имеет времени жизни. Если вы используете `access_token` «Администратора» или «Владельца» пространства, то в разделе «Автоматизации» → «API» вы можете воспользоваться функцией сброса токена. В таком случае вы увидите новый `Access token`, а предыдущий станет недействительным.

## Структура запроса метода API

При выполнении запроса, `access_token` необходимо поместить в заголовки (ключ `Authorization` с указанием типа `Bearer`), а в теле запроса указать все необходимые параметры метода. При этом не забудьте, что сервер ожидает перечисление параметров в формате `JSON`, кодировке `UTF-8` и по протоколу `HTTPS`.

<CodeBlock language="http" title="Базовый URL">
  {`https://api.pachca.com/api/shared/v1`}
</CodeBlock>

<CodeBlock language="http" title="Пример запроса">
{`POST /users HTTP/1.1
Authorization: Bearer YOUR_ACCESS_TOKEN
Content-Type: application/json; charset=utf-8
Host: api.pachca.com
Connection: close
User-Agent: Paw/3.1.10 (Macintosh; OS X/10.15.3) GCDHTTPRequest
Content-Length: 219

{
"user": {
"first_name": "Олег",
"last_name": "Петров",
"email": "olegp@example.com",
"department": "Продукт",
"list_tags": ["Product", "Design"],
"custom_properties": [
{
"id": 1678,
"value": "Санкт-Петербург"
}
]
},
"skip_email_notify": true
}`}

</CodeBlock>

## Обработка ответа метода API

Мы используем обычные коды ответов HTTP для обозначения результата выполнения запроса.

Ответ от сервера приходит в формате `JSON` и кодировке `UTF-8`.

При успешном ответе возвращаемый сервером результат будет представлен в теле ответа массивом `data`.

При ошибке выполнения запроса вы можете получить в теле ответа массив `errors` (подробнее об ошибках выполнения запросов вы можете прочитать в [следующем разделе](/guides/errors) документации).

<CodeBlock language="http" title="Пример ответа">
{`HTTP/1.1 201 Created
Server: nginx/1.14.2
Date: Wed, 22 Apr 2020 12:32:29 GMT
Content-Type: application/json; charset=utf-8
Transfer-Encoding: chunked
Connection: close
ETag: W/"4d63aae1430a3bbd35e95e3db6b364df"
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: 12f8a05c-c5cf-4a79-8d2f-f82cc477c410
X-Runtime: 0.117503
Vary: Origin
X-Rack-CORS: miss; no-origin

{
"data": {
"id": 12,
"first_name": "Олег",
"last_name": "Петров",
"nickname": "",
"email": "olegp@example.com",
"phone_number": "",
"department": "Продукт",
"role": "admin",
"suspended": false,
"invite_status": "confirmed",
"list_tags": ["Product", "Design"],
"custom_properties": [
{
"id": 1678,
"name": "Город",
"data_type": "string",
"value": "Санкт-Петербург"
}
]
}
}`}

</CodeBlock>
