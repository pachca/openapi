# pachca-tasks — Справочник эндпоинтов

## Новое напоминание

**POST** `/tasks`

> Скоуп: `tasks:create`

Новое напоминание

Метод для создания нового напоминания.

При создании напоминания обязательным условием является указания типа напоминания: звонок, встреча, простое напоминание, событие или письмо. При этом не требуется дополнительное описание - вы просто создадите напоминание с соответствующим текстом. Если вы укажите описание напоминания - то именно оно и станет текстом напоминания.

У напоминания должны быть ответственные, если их не указывать - ответственным назначается вы.

Ответственным для напоминания без привязки к каким-либо сущностям может стать любой сотрудник компании. Актуальный состав сотрудников компании вы можете получить в методе [список сотрудников](GET /users).

Напоминание можно привязать к чату, указав `chat_id`. Для привязки к чату необходимо быть его участником.

**Тело запроса** (`application/json`):

- `task` (object, **обязательный**): Собранный объект параметров создаваемого напоминания
  - `kind` (object, **обязательный**): Тип
  - `content` (string, опциональный): Описание (по умолчанию — название типа)
  - `due_at` (string, опциональный): Срок выполнения напоминания (ISO-8601) в формате YYYY-MM-DDThh:mm:ss.sssTZD. Если указано время 23:59:59.000, то напоминание будет создано на весь день (без указания времени).
  - `priority` (integer, опциональный): Приоритет: 1, 2 (важно) или 3 (очень важно).
  - `performer_ids` (array[integer], опциональный): Массив идентификаторов пользователей, привязываемых к напоминанию как «ответственные» (по умолчанию ответственным назначается вы)
  - `chat_id` (integer, опциональный): Идентификатор чата, к которому привязывается напоминание
  - `all_day` (boolean, опциональный): Напоминание на весь день (без указания времени)
  - `custom_properties` (array[object], опциональный): Задаваемые дополнительные поля
    - `id` (integer, **обязательный**): Идентификатор поля
    - `value` (string, **обязательный**): Устанавливаемое значение

**Пример:**

```bash
curl "https://api.pachca.com/api/shared/v1/tasks" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
  "task": {
    "kind": "reminder",
    "content": "Забрать со склада 21 заказ",
    "due_at": "2020-06-05T12:00:00.000+03:00",
    "priority": 2,
    "performer_ids": [
      12,
      13
    ],
    "chat_id": 456,
    "all_day": false,
    "custom_properties": [
      {
        "id": 78,
        "value": "Синий склад"
      }
    ]
  }
}'
```

**Ответ:**

- `data` (object, **обязательный**): Напоминание
  - `id` (integer, **обязательный**): Идентификатор напоминания
  - `kind` (object, **обязательный**): Тип
  - `content` (string, **обязательный**): Описание
  - `due_at` (string, **обязательный**): Срок выполнения напоминания (ISO-8601, UTC+0) в формате YYYY-MM-DDThh:mm:ss.sssZ
  - `priority` (integer, **обязательный**): Приоритет
  - `user_id` (integer, **обязательный**): Идентификатор пользователя-создателя напоминания
  - `chat_id` (integer, **обязательный**): Идентификатор чата, к которому привязано напоминание
  - `status` (object, **обязательный**): Статус напоминания
  - `created_at` (string, **обязательный**): Дата и время создания напоминания (ISO-8601, UTC+0) в формате YYYY-MM-DDThh:mm:ss.sssZ
  - `performer_ids` (array[integer], **обязательный**): Массив идентификаторов пользователей, привязанных к напоминанию как «ответственные»
  - `all_day` (boolean, **обязательный**): Напоминание на весь день (без указания времени)
  - `custom_properties` (array[object], **обязательный**): Дополнительные поля напоминания
    - `id` (integer, **обязательный**): Идентификатор поля
    - `name` (string, **обязательный**): Название поля
    - `data_type` (object, **обязательный**): Тип поля
    - `value` (string, **обязательный**): Значение

---

## Список напоминаний

**GET** `/tasks`

> Скоуп: `tasks:read`

Список напоминаний

Метод для получения списка напоминаний.

**Параметры:**

- `limit` (query, integer, опциональный): Количество возвращаемых сущностей за один запрос
- `cursor` (query, string, опциональный): Курсор для пагинации (из `meta.paginate.next_page`)

**Пример:**

```bash
curl "https://api.pachca.com/api/shared/v1/tasks?limit=1&cursor=eyJpZCI6MTAsImRpciI6ImFzYyJ9" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

**Ответ:**

- `data` (array[object], **обязательный**): 
  - `id` (integer, **обязательный**): Идентификатор напоминания
  - `kind` (object, **обязательный**): Тип
  - `content` (string, **обязательный**): Описание
  - `due_at` (string, **обязательный**): Срок выполнения напоминания (ISO-8601, UTC+0) в формате YYYY-MM-DDThh:mm:ss.sssZ
  - `priority` (integer, **обязательный**): Приоритет
  - `user_id` (integer, **обязательный**): Идентификатор пользователя-создателя напоминания
  - `chat_id` (integer, **обязательный**): Идентификатор чата, к которому привязано напоминание
  - `status` (object, **обязательный**): Статус напоминания
  - `created_at` (string, **обязательный**): Дата и время создания напоминания (ISO-8601, UTC+0) в формате YYYY-MM-DDThh:mm:ss.sssZ
  - `performer_ids` (array[integer], **обязательный**): Массив идентификаторов пользователей, привязанных к напоминанию как «ответственные»
  - `all_day` (boolean, **обязательный**): Напоминание на весь день (без указания времени)
  - `custom_properties` (array[object], **обязательный**): Дополнительные поля напоминания
    - `id` (integer, **обязательный**): Идентификатор поля
    - `name` (string, **обязательный**): Название поля
    - `data_type` (object, **обязательный**): Тип поля
    - `value` (string, **обязательный**): Значение
- `meta` (object, опциональный): Метаданные пагинации
  - `paginate` (object, опциональный): Вспомогательная информация
    - `next_page` (string, опциональный): Курсор пагинации следующей страницы

---

## Информация о напоминании

**GET** `/tasks/{id}`

> Скоуп: `tasks:read`

Информация о напоминании

Метод для получения информации о напоминании.

Для получения напоминания вам необходимо знать его `id` и указать его в `URL` запроса.

**Параметры:**

- `id` (path, integer, **обязательный**): Идентификатор напоминания

**Пример:**

```bash
curl "https://api.pachca.com/api/shared/v1/tasks/22283" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

**Ответ:**

- `data` (object, **обязательный**): Напоминание
  - `id` (integer, **обязательный**): Идентификатор напоминания
  - `kind` (object, **обязательный**): Тип
  - `content` (string, **обязательный**): Описание
  - `due_at` (string, **обязательный**): Срок выполнения напоминания (ISO-8601, UTC+0) в формате YYYY-MM-DDThh:mm:ss.sssZ
  - `priority` (integer, **обязательный**): Приоритет
  - `user_id` (integer, **обязательный**): Идентификатор пользователя-создателя напоминания
  - `chat_id` (integer, **обязательный**): Идентификатор чата, к которому привязано напоминание
  - `status` (object, **обязательный**): Статус напоминания
  - `created_at` (string, **обязательный**): Дата и время создания напоминания (ISO-8601, UTC+0) в формате YYYY-MM-DDThh:mm:ss.sssZ
  - `performer_ids` (array[integer], **обязательный**): Массив идентификаторов пользователей, привязанных к напоминанию как «ответственные»
  - `all_day` (boolean, **обязательный**): Напоминание на весь день (без указания времени)
  - `custom_properties` (array[object], **обязательный**): Дополнительные поля напоминания
    - `id` (integer, **обязательный**): Идентификатор поля
    - `name` (string, **обязательный**): Название поля
    - `data_type` (object, **обязательный**): Тип поля
    - `value` (string, **обязательный**): Значение

---

## Редактирование напоминания

**PUT** `/tasks/{id}`

> Скоуп: `tasks:update`

Редактирование напоминания

Метод для редактирования напоминания.

Для редактирования напоминания вам необходимо знать его `id` и указать его в `URL` запроса. Все редактируемые параметры напоминания указываются в теле запроса.

**Параметры:**

- `id` (path, integer, **обязательный**): Идентификатор напоминания

**Тело запроса** (`application/json`):

- `task` (object, **обязательный**): Собранный объект параметров обновляемого напоминания
  - `kind` (object, опциональный): Тип
  - `content` (string, опциональный): Описание
  - `due_at` (string, опциональный): Срок выполнения напоминания (ISO-8601) в формате YYYY-MM-DDThh:mm:ss.sssTZD. Если указано время 23:59:59.000, то напоминание будет создано на весь день (без указания времени).
  - `priority` (integer, опциональный): Приоритет: 1, 2 (важно) или 3 (очень важно).
  - `performer_ids` (array[integer], опциональный): Массив идентификаторов пользователей, привязываемых к напоминанию как «ответственные»
  - `status` (object, опциональный): Статус
  - `all_day` (boolean, опциональный): Напоминание на весь день (без указания времени)
  - `done_at` (string, опциональный): Дата и время выполнения напоминания (ISO-8601, UTC+0) в формате YYYY-MM-DDThh:mm:ss.sssZ
  - `custom_properties` (array[object], опциональный): Задаваемые дополнительные поля
    - `id` (integer, **обязательный**): Идентификатор поля
    - `value` (string, **обязательный**): Устанавливаемое значение

**Пример:**

```bash
curl -X PUT "https://api.pachca.com/api/shared/v1/tasks/22283" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
  "task": {
    "kind": "reminder",
    "content": "Забрать со склада 21 заказ",
    "due_at": "2020-06-05T12:00:00.000+03:00",
    "priority": 2,
    "performer_ids": [
      12
    ],
    "status": "done",
    "all_day": false,
    "done_at": "2020-06-05T12:00:00.000Z",
    "custom_properties": [
      {
        "id": 78,
        "value": "Синий склад"
      }
    ]
  }
}'
```

**Ответ:**

- `data` (object, **обязательный**): Напоминание
  - `id` (integer, **обязательный**): Идентификатор напоминания
  - `kind` (object, **обязательный**): Тип
  - `content` (string, **обязательный**): Описание
  - `due_at` (string, **обязательный**): Срок выполнения напоминания (ISO-8601, UTC+0) в формате YYYY-MM-DDThh:mm:ss.sssZ
  - `priority` (integer, **обязательный**): Приоритет
  - `user_id` (integer, **обязательный**): Идентификатор пользователя-создателя напоминания
  - `chat_id` (integer, **обязательный**): Идентификатор чата, к которому привязано напоминание
  - `status` (object, **обязательный**): Статус напоминания
  - `created_at` (string, **обязательный**): Дата и время создания напоминания (ISO-8601, UTC+0) в формате YYYY-MM-DDThh:mm:ss.sssZ
  - `performer_ids` (array[integer], **обязательный**): Массив идентификаторов пользователей, привязанных к напоминанию как «ответственные»
  - `all_day` (boolean, **обязательный**): Напоминание на весь день (без указания времени)
  - `custom_properties` (array[object], **обязательный**): Дополнительные поля напоминания
    - `id` (integer, **обязательный**): Идентификатор поля
    - `name` (string, **обязательный**): Название поля
    - `data_type` (object, **обязательный**): Тип поля
    - `value` (string, **обязательный**): Значение

---

## Удаление напоминания

**DELETE** `/tasks/{id}`

> Скоуп: `tasks:delete`

Удаление напоминания

Метод для удаления напоминания.

Для удаления напоминания вам необходимо знать его `id` и указать его в `URL` запроса.

**Параметры:**

- `id` (path, integer, **обязательный**): Идентификатор напоминания

**Пример:**

```bash
curl -X DELETE "https://api.pachca.com/api/shared/v1/tasks/22283" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

---
