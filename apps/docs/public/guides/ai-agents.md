
# AI агенты

## Пачка как среда для AI-агентов

Пачка — готовая среда для ваших AI-агентов. Упомяните агента в треде — остальное он сделает сам. Агент находится внутри разговора, видит контекст и действует автономно.

- **Агент — участник команды** — действует как сотрудник: читает обсуждения, создаёт задачи, отправляет результаты. Ответственность остаётся за человеком, агент выполняет работу
- **Треды как единица работы** — каждый тред изолирован, агент видит только его содержимое и отвечает туда же, не загрязняя общий чат
- **Сквозные треды** — упомяните любого сотрудника в треде, и он увидит весь контекст, даже если не состоит в исходном чате. Один тред — единая точка координации между людьми и агентом

![Пример работы AI-агента в треде Пачки](/images/ai-agent-kai.jpg)

*Пример работы AI-агента в треде Пачки*


> Как мы сделали AI-агента, который живёт в корпоративном мессенджере — [читайте в блоге Пачки](https://pachca.com/blog/ai-agent-v-korporativnom-messendzhere)


- **Ответ на вопрос** — Читает тред, ищет ответ в базе знаний, отвечает в тот же тред
- **Задача из обсуждения** — Читает историю треда, формирует заголовок и описание, создаёт задачу в трекере
- **Обработка заявок** — Получает заявку в канале, уточняет детали через форму, маршрутизирует ответственному
- **Диагностика CI** — Запрашивает статус CI-проверок, находит упавший джоб, читает логи и отвечает с диагнозом
- **Анализ файла** — Скачивает файл по ссылке из репозитория или веб-страницы, анализирует и отвечает в тред
- **Исследование компании** — Находит сайт компании, определяет размер команды, собирает ключевую информацию в отчёт
- **Мониторинг** — Следит за сообщениями в канале, при триггере отправляет уведомление или выполняет действие
- **Онбординг** — Приветствует нового сотрудника, отправляет инструкции, помогает настроить профиль
- **Личный ассистент** — Напоминает о задачах, готовит дайджест непрочитанного, собирает повестку к встрече
- **Ответы коллегам** — Отвечает на типовые вопросы от коллег, пока вы заняты, используя контекст ваших проектов
- **Поиск упоминаний** — Находит все треды и сообщения, где вас упомянули, и собирает краткую сводку


## Как это работает


  ### Шаг 1. Получение события

Агент получает события через [исходящий вебхук](/guides/webhook) — упоминание по имени, ответ в тред или личное сообщение боту.


  ### Шаг 2. Сбор контекста

Агент читает историю сообщений и информацию о чате, чтобы понять контекст запроса.

    - [Список сообщений чата](GET /messages) — история сообщений треда или чата
    - [Информация о чате](GET /chats/{id}) — участники и тема чата


  ### Шаг 3. Выполнение действий

Агент выполняет нужные действия — отправляет сообщения, создаёт задачи, вызывает внешние сервисы. Реакция-индикатор показывает пользователю, что агент работает.

    - [Новое сообщение](POST /messages) — отправить сообщение в канал или беседу
    - [Новый тред](POST /messages/{id}/thread) — создать тред и ответить
    - [Новая реакция](POST /messages/{id}/reactions) — поставить реакцию-индикатор


  ### Шаг 4. Ответ

Результат агент отправляет обратно в тред или в личные сообщения и снимает реакцию-индикатор.

    - [Новое сообщение](POST /messages) — отправить результат
    - [Удаление реакции](DELETE /messages/{id}/reactions) — снять реакцию-индикатор


## Практические советы

- **Реакции как индикатор** — агент ставит реакцию (например, ⏳) при получении запроса и снимает по завершении. Пользователь сразу видит, что агент работает
- **Один бот — один агент** — создайте отдельного бота для каждого агента, чтобы разделить права и логику
- **Контекст из треда** — читайте историю треда перед ответом, а не только последнее сообщение. Так агент учитывает весь контекст разговора
- **Обработка ошибок** — если агент не может выполнить задачу, пусть он ответит в тред с пояснением, а не молчит. Прозрачность действий важнее идеального результата

## Ресурсы для AI-агентов

### Agent Skills (SKILL.md)

Описание API в формате skill-файлов для подключения к AI-агентам. Каждый скилл покрывает одну предметную область и содержит пошаговые сценарии с curl-примерами, обработку ошибок и gotchas.

| Скилл | Описание |
|-------|----------|
| `pachca-messages` | Отправка сообщений, ответы в треды, загрузка файлов, кнопки, реакции |
| `pachca-chats` | Управление каналами и беседами, участники, архивация, экспорт |
| `pachca-users` | Управление сотрудниками и тегами (группами) |
| `pachca-profile` | Профиль текущего пользователя, статус, кастомные поля |
| `pachca-bots` | Боты, входящие/исходящие вебхуки, разворачивание ссылок |
| `pachca-forms` | Интерактивные формы с полями ввода и кнопками |
| `pachca-tasks` | Создание и управление задачами (напоминаниями) |
| `pachca-security` | Журнал аудита событий и DLP-система |

Скиллы соответствуют спецификации [Agent Skills](https://agentskills.io) и [Agent Skills Discovery RFC](https://github.com/cloudflare/agent-skills-discovery-rfc), совместимы с 40+ AI-агентами через [Skills CLI](https://skills.sh).

### Другие форматы

- [llms.txt](/llms.txt) — Краткая сводка документации со ссылками на страницы в markdown-формате. Соответствует стандарту llms.txt.
- [llms-full.txt](/llms-full.txt) — Полная документация в одном файле для загрузки в контекст агента. Содержит все руководства и описания методов.
- [OpenAPI-спецификация](/openapi.yaml) — OpenAPI 3.0 спецификация для кодогенерации, парсинга и автоматического создания клиентов.
- [Context7](https://context7.com/pachca/openapi) — Документация Пачки в Context7 — MCP-сервер с актуальной документацией для AI-агентов.


> Любая страница документации доступна в markdown-формате — добавьте `.md` к адресу страницы. Например: `/guides/webhook.md`


## Как подключить Пачку к вашему агенту

### Через Agent Skills (рекомендуется)

Универсальный способ для 40+ AI-агентов (Claude Code, Cursor, Codex, Windsurf, Continue и др.).

**Agent Skills**

```bash
npx skills add pachca/openapi
```


Команда автоматически определит установленные агенты и подключит скиллы Пачки. Агент получит пошаговые сценарии для всех типичных задач — от отправки сообщений до работы с формами.

### Через Context7 MCP

Для AI-агентов с поддержкой MCP (Claude Code, Cursor, Windsurf и др.). [Context7](https://context7.com) — MCP-сервер, который отдаёт актуальную документацию прямо в контекст агента. Документация Пачки доступна по адресу [context7.com/pachca/openapi](https://context7.com/pachca/openapi).

**Claude Code**

```bash
claude mcp add context7 https://mcp.context7.com/mcp
```


Для других агентов добавьте MCP-сервер `https://mcp.context7.com/mcp` в настройках. Чтобы агент использовал документацию Пачки, добавьте в промпт `use context7` или настройте это через правила агента.

### Через llms-full.txt

Подходит для агентов, которые не поддерживают формат Agent Skills, но позволяют загружать текст в контекст (ChatGPT, собственные агенты на базе LLM).

**llms-full.txt**

```text
https://dev.pachca.com/llms-full.txt
```


### Через OpenAPI-спецификацию

Подходит для кодогенераторов (openapi-generator, Kiota, Orval) и агентов, которые умеют работать с OpenAPI напрямую (GPT Actions).

**OpenAPI**

```text
https://dev.pachca.com/openapi.yaml
```

